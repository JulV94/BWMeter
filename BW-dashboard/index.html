<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bandwidth Dashboard</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">
  </head>
  <body>
      <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
          <div class="container-fluid">
              <div class="navbar-header">
                  <a class="navbar-brand" href="#">Bandwidth Dashboard</a>
              </div>
              <ul class="nav navbar-nav">
                  <li><a class="page-scroll" href="#ping">Ping</a></li>
                  <li><a class="page-scroll" href="#down">Download</a></li>
                  <li><a class="page-scroll" href="#up">Upload</a></li>
              </ul>
          </div>
      </nav>

      <section id="ping" class="container-fluid anchor">
          <div class="row-fluid">
              <div class="panel panel-default">
                  <div class="panel-heading">Ping Time Chart</div>
                  <div class="panel-body">
                      <div id="pingGraph"></div>
                  </div>
              </div>
          </div>
      </section>
      <section id="down" class="container-fluid anchor">
          <div class="row-fluid">
              <div class="panel panel-default">
                  <div class="panel-heading">Download Speed Chart</div>
                  <div class="panel-body">
                      <div id="downGraph"></div>
                  </div>
              </div>
          </div>
      </section>
      <section id="up" class="container-fluid anchor">
          <div class="row-fluid">
              <div class="panel panel-default">
                  <div class="panel-heading">Upload Speed Chart</div>
                  <div class="panel-body">
                      <div id="upGraph"></div>
                  </div>
              </div>
          </div>
      </section>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange=function()
      {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
          var result = JSON.parse(xmlhttp.responseText);
          var pingData = [
          {
            x: result['time'],
            y: result['ping'],
            type: 'scatter'
          }];
          var downData = [
          {
            x: result['time'],
            y: result['down'],
            type: 'scatter'
          }];
          var upData = [
          {
            x: result['time'],
            y: result['up'],
            type: 'scatter'
          }];

          Plotly.newPlot('pingGraph', pingData);
          Plotly.newPlot('downGraph', downData);
          Plotly.newPlot('upGraph', upData);
        }
      }
      xmlhttp.open("GET","query.php",true);
      xmlhttp.send();
    </script>
  </body>
</html>
